<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>MiLogDB</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container my-4">

    <header th:fragment="siteHeader">
        <h1>MiLogDB</h1>
        <h2>Welcome</h2>
        <hr/>
    </header>

    <form method="get" th:action="@{/}">
        <div class="btn-group" role="group">
            <input type="radio" class="btn-check" id="loginRadio"  autocomplete="off" name="mode" value="0" th:checked="${mode == 0}" onchange="this.form.submit()">
            <label class="btn btn-outline-primary" for="loginRadio">Login</label>
            <input type="radio" class="btn-check" id="signupRadio" autocomplete="off" name="mode" value="1" th:checked="${mode == 1}" onchange="this.form.submit()">
            <label class="btn btn-outline-primary" for="signupRadio">Sign Up</label>
        </div>
    </form>

    <form th:action="@{'/' + ${(mode == 0) ? 'login' : 'signup'}}" method="post" class="mt-4">
        <h4 th:text="(${mode == 0})? 'Login' : 'Sign Up' "></h4>

        <input type="text" name="username" class="form-control mb-2" placeholder="Username" th:value="${param['username']} ?: ''">
        <input type="password" name="password" class="form-control mb-2" placeholder="Password" th:value="${param['password']} ?: ''">
<!--        <input th:if="${mode == 1}" type="password" name="confirmPassword" class="form-control mb-2" placeholder="Confirm Password">-->
<!--        <input th:if="${mode == 1}" type="email" name="email" class="form-control mb-2" placeholder="Email">-->
        <button class="btn btn-success" th:text="(${mode == 0})? 'Login' : 'Sign Up' "></button>

        <p class="text-danger mt-2" th:if="${param.error}">Invalid username or password</p>
        <p class="text-danger mt-2" th:if="${signupError}" th:text="${signupError}"></p>
<!--        <p class="text-success mt-2" th:if="${param.registered}">Registration successful, please login.</p>-->
    </form>


<!--    <h2 th:text="'Hello There !'">Hello!</h2>-->
<!--    <p>This is the home page.</p>-->

    <!-- include footer from layout.html -->
    <div th:replace="~{layout :: siteFooter}"></div>
</div>
</body>
</html>
